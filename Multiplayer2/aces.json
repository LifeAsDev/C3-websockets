{
	"$schema": "../aces.schema.json",

	"signalling": {
		"conditions": [
			{
				"id": "onConnectedToSgWs",
				"scriptName": "onConnectedToSgWs",
				"isTrigger": true
			},
			{
				"id": "onLoggedInToSgWs",
				"scriptName": "onLoggedInToSgWs",
				"isTrigger": true
			}
		],
		"actions": [
			{
				"id": "connect",
				"scriptName": "connect",
				"params": [
					{
						"id": "url",
						"type": "string",
						"initialValue": "\"wss://multiplayer.construct.net\""
					},
					{ "id": "tag", "type": "string" }
				]
			},
			{
				"id": "log-in",
				"scriptName": "logIn",
				"params": [
					{ "id": "alias", "type": "string" },
					{ "id": "tag", "type": "string" }
				]
			},
			{
				"id": "simulateLatency",
				"scriptName": "simulateLatency",
				"params": [
					{ "id": "latencyMs", "type": "number", "initialValue": "100" },
					{ "id": "pdvMs", "type": "number", "initialValue": "30" },
					{ "id": "lossPercent", "type": "number", "initialValue": "5" },
					{ "id": "clientTag", "type": "string" }
				]
			},
			{
				"id": "disconnectFromRoom",
				"scriptName": "disconnectFromRoom",
				"params": [{ "id": "clientTag", "type": "string" }]
			},
			{
				"id": "disconnectFromSignalling",
				"scriptName": "disconnectFromSignalling",
				"params": [{ "id": "clientTag", "type": "string" }]
			}
		]
	},

	"room": {
		"conditions": [
			{
				"id": "onJoinedRoom",
				"scriptName": "onJoinedRoom",
				"isTrigger": true
			},
			{
				"id": "onPeerMessage",
				"scriptName": "onPeerMessage",
				"isTrigger": true,
				"params": [{ "id": "tag", "type": "string" }]
			},
			{
				"id": "onPeerConnected",
				"scriptName": "onPeerConnected",
				"isTrigger": true
			},
			{
				"id": "isHost",
				"scriptName": "isHost",
				"params": [{ "id": "tag", "type": "string" }]
			}
		],
		"actions": [
			{
				"id": "join-room",
				"scriptName": "joinRoom",
				"params": [
					{ "id": "game", "type": "string" },
					{ "id": "instance", "type": "string" },
					{ "id": "room", "type": "string" },
					{ "id": "tag", "type": "string" },
					{ "id": "max-peers", "type": "number" }
				]
			},
			{
				"id": "auto-join-room",
				"scriptName": "autoJoinRoom",
				"params": [
					{ "id": "game", "type": "string" },
					{ "id": "instance", "type": "string" },
					{ "id": "room", "type": "string" },
					{ "id": "tag", "type": "string" },
					{ "id": "max-peers", "type": "number" },
					{ "id": "locking", "type": "combo", "items": ["true", "false"] }
				]
			},
			{
				"id": "sendMessage",
				"scriptName": "sendPeerMessage",
				"params": [
					{ "id": "peerId", "type": "string" },
					{ "id": "tag", "type": "string" },
					{ "id": "clientTag", "type": "string" },
					{ "id": "message", "type": "string" },
					{
						"id": "mode",
						"type": "combo",
						"items": ["unorderedReliable", "orderedReliable", "unreliable"]
					}
				]
			},
			{
				"id": "broadcastMessage",
				"scriptName": "broadcastMessage",
				"params": [
					{ "id": "peerId", "type": "string" },
					{ "id": "tag", "type": "string" },
					{ "id": "clientTag", "type": "string" },
					{ "id": "message", "type": "string" },
					{
						"id": "mode",
						"type": "combo",
						"items": ["unorderedReliable", "orderedReliable", "unreliable"]
					}
				]
			}
		],
		"expressions": [
			{
				"id": "message",
				"expressionName": "message",
				"highlight": false,
				"returnType": "string"
			},
			{
				"id": "peerId",
				"expressionName": "PeerID",
				"highlight": false,
				"returnType": "string"
			},
			{
				"id": "clientTag",
				"expressionName": "ClientTag",
				"highlight": false,
				"returnType": "string"
			},
			{
				"id": "myId",
				"expressionName": "MyID",
				"highlight": false,
				"returnType": "string",
				"params": [{ "id": "tag", "type": "string" }]
			},
			{
				"id": "peerAlias",
				"expressionName": "PeerAlias",
				"highlight": false,
				"returnType": "string"
			},
			{
				"id": "hostId",
				"expressionName": "HostID",
				"highlight": false,
				"returnType": "string",
				"params": [{ "id": "tag", "type": "string" }]
			}
		]
	},

	"roomHost": {
		"conditions": [],
		"expressions": []
	}
}
