{
	"$schema": "../aces.schema.json",

	"signalling": {
		"conditions": [
			{
				"id": "onConnectedToSgWs",
				"scriptName": "onConnectedToSgWs",
				"isTrigger": true
			},
			{
				"id": "onLoggedInToSgWs",
				"scriptName": "onLoggedInToSgWs",
				"isTrigger": true
			},
			{
				"id": "isConnected",
				"scriptName": "isConnected",
				"params": [{ "id": "clientTag", "type": "string" }]
			},
			{
				"id": "isLoggedIn",
				"scriptName": "isLoggedIn",
				"params": [{ "id": "clientTag", "type": "string" }]
			},
			{
				"id": "onLeftRoom",
				"scriptName": "onLeftRoom",
				"isTrigger": true
			},
			{
				"id": "isInRoom",
				"scriptName": "isInRoom",
				"params": [{ "id": "clientTag", "type": "string" }]
			},
			{
				"id": "onError",
				"scriptName": "onError",
				"isTrigger": true
			},

			{
				"id": "onRoomList",
				"scriptName": "onRoomList",
				"isTrigger": true
			},
			{
				"id": "onInstanceList",
				"scriptName": "onInstanceList",
				"isTrigger": true
			}
		],
		"actions": [
			{
				"id": "connect",
				"scriptName": "connect",
				"params": [
					{
						"id": "url",
						"type": "string",
						"initialValue": "\"wss://multiplayer.construct.net\""
					},
					{ "id": "tag", "type": "string" }
				]
			},
			{
				"id": "log-in",
				"scriptName": "logIn",
				"params": [
					{ "id": "alias", "type": "string" },
					{ "id": "tag", "type": "string" }
				]
			},
			{
				"id": "simulateLatency",
				"scriptName": "simulateLatency",
				"params": [
					{ "id": "latencyMs", "type": "number", "initialValue": "100" },
					{ "id": "pdvMs", "type": "number", "initialValue": "30" },
					{ "id": "lossPercent", "type": "number", "initialValue": "5" },
					{ "id": "clientTag", "type": "string" }
				]
			},
			{
				"id": "disconnectFromRoom",
				"scriptName": "disconnectFromRoom",
				"params": [{ "id": "clientTag", "type": "string" }]
			},
			{
				"id": "disconnectFromSignalling",
				"scriptName": "disconnectFromSignalling",
				"params": [{ "id": "clientTag", "type": "string" }]
			},
			{
				"id": "leaveRoomOnSignalling",
				"scriptName": "leaveRoomOnSignalling",
				"params": [{ "id": "clientTag", "type": "string" }]
			},
			{
				"id": "requestRoomList",
				"scriptName": "requestRoomList",
				"params": [
					{ "id": "clientTag", "type": "string" },
					{ "id": "game", "type": "string" },
					{ "id": "instance", "type": "string" },
					{
						"id": "which",
						"type": "combo",
						"items": ["all", "unlocked", "available"]
					}
				]
			},
			{
				"id": "requestInstanceList",
				"scriptName": "requestInstanceList",
				"params": [
					{ "id": "clientTag", "type": "string" },
					{ "id": "game", "type": "string" }
				]
			}
		],
		"expressions": [
			{
				"id": "errorMessage",
				"expressionName": "ErrorMessage",
				"highlight": false,
				"returnType": "string"
			},
			{
				"id": "currentGame",
				"expressionName": "CurrentGame",
				"highlight": false,
				"returnType": "string",
				"params": [{ "id": "clientTag", "type": "string" }]
			},
			{
				"id": "currentInstance",
				"expressionName": "CurrentInstance",
				"highlight": false,
				"returnType": "string",
				"params": [{ "id": "clientTag", "type": "string" }]
			},
			{
				"id": "currentRoom",
				"expressionName": "CurrentRoom",
				"highlight": false,
				"returnType": "string",
				"params": [{ "id": "clientTag", "type": "string" }]
			},
			{
				"id": "listRoomCount",
				"expressionName": "ListRoomCount",
				"highlight": false,
				"returnType": "number"
			},
			{
				"id": "listRoomName",
				"expressionName": "ListRoomName",
				"highlight": false,
				"returnType": "string",
				"params": [
					{
						"id": "index",
						"type": "number",
						"description": "The index of the room in the list."
					}
				]
			},
			{
				"id": "listRoomPeerCount",
				"expressionName": "ListRoomPeerCount",
				"highlight": false,
				"returnType": "number",
				"params": [
					{
						"id": "index",
						"type": "number",
						"description": "The index of the room in the list."
					}
				]
			},
			{
				"id": "listRoomMaxPeerCount",
				"expressionName": "ListRoomMaxPeerCount",
				"highlight": false,
				"returnType": "number",
				"params": [
					{
						"id": "index",
						"type": "number",
						"description": "The index of the room in the list."
					}
				]
			},
			{
				"id": "listRoomState",
				"expressionName": "ListRoomState",
				"highlight": false,
				"returnType": "string",
				"params": [
					{
						"id": "index",
						"type": "number",
						"description": "The index of the room in the list."
					}
				]
			},
			{
				"id": "listInstanceCount",
				"expressionName": "ListInstanceCount",
				"highlight": false,
				"returnType": "number"
			},
			{
				"id": "listInstanceName",
				"expressionName": "ListInstanceName",
				"highlight": false,
				"returnType": "string",
				"params": [
					{
						"id": "index",
						"type": "number",
						"description": "The index of the game instance in the list."
					}
				]
			},
			{
				"id": "listInstancePeerCount",
				"expressionName": "ListInstancePeerCount",
				"highlight": false,
				"returnType": "number",
				"params": [
					{
						"id": "index",
						"type": "number",
						"description": "The index of the game instance in the list."
					}
				]
			}
		]
	},

	"room": {
		"conditions": [
			{
				"id": "onJoinedRoom",
				"scriptName": "onJoinedRoom",
				"isTrigger": true
			},
			{
				"id": "onPeerMessage",
				"scriptName": "onPeerMessage",
				"isTrigger": true,
				"params": [{ "id": "tag", "type": "string" }]
			},
			{
				"id": "onPeerConnected",
				"scriptName": "onPeerConnected",
				"isTrigger": true
			},
			{
				"id": "isHost",
				"scriptName": "isHost",
				"params": [{ "id": "tag", "type": "string" }]
			},
			{
				"id": "onDisconnectedFromSignalling",
				"scriptName": "onDisconnectedFromSignalling",
				"isTrigger": true
			},
			{
				"id": "onPeerDisconnected",
				"scriptName": "onPeerDisconnected",
				"isTrigger": true
			},
			{
				"id": "onKicked",
				"scriptName": "onKicked",
				"isTrigger": true
			},
			{
				"id": "onAnyPeerMessage",
				"scriptName": "onAnyPeerMessage",
				"isTrigger": true
			}
		],
		"actions": [
			{
				"id": "join-room",
				"scriptName": "joinRoom",
				"params": [
					{ "id": "game", "type": "string" },
					{ "id": "instance", "type": "string" },
					{ "id": "room", "type": "string" },
					{ "id": "tag", "type": "string" },
					{ "id": "max-peers", "type": "number" }
				]
			},
			{
				"id": "auto-join-room",
				"scriptName": "autoJoinRoom",
				"params": [
					{ "id": "game", "type": "string" },
					{ "id": "instance", "type": "string" },
					{ "id": "room", "type": "string" },
					{ "id": "tag", "type": "string" },
					{ "id": "max-peers", "type": "number" },
					{ "id": "locking", "type": "combo", "items": ["true", "false"] }
				]
			},
			{
				"id": "sendMessage",
				"scriptName": "sendPeerMessage",
				"params": [
					{ "id": "peerId", "type": "string" },
					{ "id": "tag", "type": "string" },
					{ "id": "clientTag", "type": "string" },
					{ "id": "message", "type": "string" },
					{
						"id": "mode",
						"type": "combo",
						"items": ["unorderedReliable", "orderedReliable", "unreliable"]
					}
				]
			}
		],
		"expressions": [
			{
				"id": "message",
				"expressionName": "message",
				"highlight": false,
				"returnType": "string"
			},
			{
				"id": "messageTag",
				"expressionName": "messageTag",
				"highlight": false,
				"returnType": "string"
			},
			{
				"id": "peerId",
				"expressionName": "PeerID",
				"highlight": false,
				"returnType": "string"
			},
			{
				"id": "clientTag",
				"expressionName": "ClientTag",
				"highlight": false,
				"returnType": "string"
			},
			{
				"id": "myId",
				"expressionName": "MyID",
				"highlight": false,
				"returnType": "string",
				"params": [{ "id": "tag", "type": "string" }]
			},
			{
				"id": "peerAlias",
				"expressionName": "PeerAlias",
				"highlight": false,
				"returnType": "string"
			},

			{
				"id": "hostId",
				"expressionName": "HostID",
				"highlight": false,
				"returnType": "string",
				"params": [{ "id": "tag", "type": "string" }]
			},
			{
				"id": "leaveReason",
				"expressionName": "LeaveReason",
				"returnType": "string",
				"params": [{ "id": "clientTag", "type": "string" }]
			}
		]
	},

	"roomHost": {
		"actions": [
			{
				"id": "broadcastMessage",
				"scriptName": "broadcastMessage",
				"params": [
					{ "id": "peerId", "type": "string" },
					{ "id": "tag", "type": "string" },
					{ "id": "clientTag", "type": "string" },
					{ "id": "message", "type": "string" },
					{
						"id": "mode",
						"type": "combo",
						"items": ["unorderedReliable", "orderedReliable", "unreliable"]
					}
				]
			},
			{
				"id": "kickPeer",
				"scriptName": "kickPeer",
				"params": [
					{ "id": "peerId", "type": "string" },
					{ "id": "reason", "type": "string" },
					{ "id": "clientTag", "type": "string" }
				]
			}
		],
		"conditions": [],
		"expressions": []
	}
}
